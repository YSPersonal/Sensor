#include "RadarDisplay.h"
#include "freeGLUT\freeglut.h"
#include <Windows.h>
float grid[]{
	-0.025 ,  0.0433012701892 ,
	-0.021130913087 ,  0.0453153893518 ,
	-0.05 ,  0.0866025403784 ,
	-0.0422618261741 ,  0.0906307787037 ,
	-0.075 ,  0.129903810568 ,
	-0.0633927392611 ,  0.135946168055 ,
	-0.1 ,  0.173205080757 ,
	-0.0845236523481 ,  0.181261557407 ,
	-0.125 ,  0.216506350946 ,
	-0.105654565435 ,  0.226576946759 ,
	-0.15 ,  0.259807621135 ,
	-0.126785478522 ,  0.271892336111 ,
	-0.175 ,  0.303108891325 ,
	-0.147916391609 ,  0.317207725463 ,
	-0.2 ,  0.346410161514 ,
	-0.169047304696 ,  0.362523114815 ,
	-0.225 ,  0.389711431703 ,
	-0.190178217783 ,  0.407838504166 ,
	-0.25 ,  0.433012701892 ,
	-0.21130913087 ,  0.453153893518 ,
	-0.275 ,  0.476313972081 ,
	-0.232440043957 ,  0.49846928287 ,
	-0.3 ,  0.519615242271 ,
	-0.253570957044 ,  0.543784672222 ,
	-0.325 ,  0.56291651246 ,
	-0.274701870131 ,  0.589100061574 ,
	-0.35 ,  0.606217782649 ,
	-0.295832783218 ,  0.634415450926 ,
	-0.375 ,  0.649519052838 ,
	-0.316963696306 ,  0.679730840277 ,
	-0.4 ,  0.692820323028 ,
	-0.338094609393 ,  0.725046229629 ,
	-0.425 ,  0.736121593217 ,
	-0.35922552248 ,  0.770361618981 ,
	-0.45 ,  0.779422863406 ,
	-0.380356435567 ,  0.815677008333 ,
	-0.475 ,  0.822724133595 ,
	-0.401487348654 ,  0.860992397685 ,
	-0.5 ,  0.866025403784 ,
	-0.422618261741 ,  0.906307787037 ,
	-0.525 ,  0.909326673974 ,
	-0.443749174828 ,  0.951623176388 ,
	-0.021130913087 ,  0.0453153893518 ,
	-0.0171010071663 ,  0.0469846310393 ,
	-0.0422618261741 ,  0.0906307787037 ,
	-0.0342020143326 ,  0.0939692620786 ,
	-0.0633927392611 ,  0.135946168055 ,
	-0.0513030214989 ,  0.140953893118 ,
	-0.0845236523481 ,  0.181261557407 ,
	-0.0684040286651 ,  0.187938524157 ,
	-0.105654565435 ,  0.226576946759 ,
	-0.0855050358314 ,  0.234923155196 ,
	-0.126785478522 ,  0.271892336111 ,
	-0.102606042998 ,  0.281907786236 ,
	-0.147916391609 ,  0.317207725463 ,
	-0.119707050164 ,  0.328892417275 ,
	-0.169047304696 ,  0.362523114815 ,
	-0.13680805733 ,  0.375877048314 ,
	-0.190178217783 ,  0.407838504166 ,
	-0.153909064497 ,  0.422861679354 ,
	-0.21130913087 ,  0.453153893518 ,
	-0.171010071663 ,  0.469846310393 ,
	-0.232440043957 ,  0.49846928287 ,
	-0.188111078829 ,  0.516830941432 ,
	-0.253570957044 ,  0.543784672222 ,
	-0.205212085995 ,  0.563815572472 ,
	-0.274701870131 ,  0.589100061574 ,
	-0.222313093162 ,  0.610800203511 ,
	-0.295832783218 ,  0.634415450926 ,
	-0.239414100328 ,  0.65778483455 ,
	-0.316963696306 ,  0.679730840277 ,
	-0.256515107494 ,  0.704769465589 ,
	-0.338094609393 ,  0.725046229629 ,
	-0.273616114661 ,  0.751754096629 ,
	-0.35922552248 ,  0.770361618981 ,
	-0.290717121827 ,  0.798738727668 ,
	-0.380356435567 ,  0.815677008333 ,
	-0.307818128993 ,  0.845723358707 ,
	-0.401487348654 ,  0.860992397685 ,
	-0.324919136159 ,  0.892707989747 ,
	-0.422618261741 ,  0.906307787037 ,
	-0.342020143326 ,  0.939692620786 ,
	-0.443749174828 ,  0.951623176388 ,
	-0.359121150492 ,  0.986677251825 ,
	-0.0171010071663 ,  0.0469846310393 ,
	-0.0129409522551 ,  0.0482962913145 ,
	-0.0342020143326 ,  0.0939692620786 ,
	-0.0258819045103 ,  0.0965925826289 ,
	-0.0513030214989 ,  0.140953893118 ,
	-0.0388228567654 ,  0.144888873943 ,
	-0.0684040286651 ,  0.187938524157 ,
	-0.0517638090205 ,  0.193185165258 ,
	-0.0855050358314 ,  0.234923155196 ,
	-0.0647047612756 ,  0.241481456572 ,
	-0.102606042998 ,  0.281907786236 ,
	-0.0776457135308 ,  0.289777747887 ,
	-0.119707050164 ,  0.328892417275 ,
	-0.0905866657859 ,  0.338074039201 ,
	-0.13680805733 ,  0.375877048314 ,
	-0.103527618041 ,  0.386370330516 ,
	-0.153909064497 ,  0.422861679354 ,
	-0.116468570296 ,  0.43466662183 ,
	-0.171010071663 ,  0.469846310393 ,
	-0.129409522551 ,  0.482962913145 ,
	-0.188111078829 ,  0.516830941432 ,
	-0.142350474806 ,  0.531259204459 ,
	-0.205212085995 ,  0.563815572472 ,
	-0.155291427062 ,  0.579555495773 ,
	-0.222313093162 ,  0.610800203511 ,
	-0.168232379317 ,  0.627851787088 ,
	-0.239414100328 ,  0.65778483455 ,
	-0.181173331572 ,  0.676148078402 ,
	-0.256515107494 ,  0.704769465589 ,
	-0.194114283827 ,  0.724444369717 ,
	-0.273616114661 ,  0.751754096629 ,
	-0.207055236082 ,  0.772740661031 ,
	-0.290717121827 ,  0.798738727668 ,
	-0.219996188337 ,  0.821036952346 ,
	-0.307818128993 ,  0.845723358707 ,
	-0.232937140592 ,  0.86933324366 ,
	-0.324919136159 ,  0.892707989747 ,
	-0.245878092847 ,  0.917629534975 ,
	-0.342020143326 ,  0.939692620786 ,
	-0.258819045103 ,  0.965925826289 ,
	-0.359121150492 ,  0.986677251825 ,
	-0.271759997358 ,  1.0142221176 ,
	-0.0129409522551 ,  0.0482962913145 ,
	-0.00868240888335 ,  0.0492403876506 ,
	-0.0258819045103 ,  0.0965925826289 ,
	-0.0173648177667 ,  0.0984807753012 ,
	-0.0388228567654 ,  0.144888873943 ,
	-0.02604722665 ,  0.147721162952 ,
	-0.0517638090205 ,  0.193185165258 ,
	-0.0347296355334 ,  0.196961550602 ,
	-0.0647047612756 ,  0.241481456572 ,
	-0.0434120444167 ,  0.246201938253 ,
	-0.0776457135308 ,  0.289777747887 ,
	-0.0520944533001 ,  0.295442325904 ,
	-0.0905866657859 ,  0.338074039201 ,
	-0.0607768621834 ,  0.344682713554 ,
	-0.103527618041 ,  0.386370330516 ,
	-0.0694592710668 ,  0.393923101205 ,
	-0.116468570296 ,  0.43466662183 ,
	-0.0781416799501 ,  0.443163488855 ,
	-0.129409522551 ,  0.482962913145 ,
	-0.0868240888335 ,  0.492403876506 ,
	-0.142350474806 ,  0.531259204459 ,
	-0.0955064977168 ,  0.541644264157 ,
	-0.155291427062 ,  0.579555495773 ,
	-0.1041889066 ,  0.590884651807 ,
	-0.168232379317 ,  0.627851787088 ,
	-0.112871315484 ,  0.640125039458 ,
	-0.181173331572 ,  0.676148078402 ,
	-0.121553724367 ,  0.689365427109 ,
	-0.194114283827 ,  0.724444369717 ,
	-0.13023613325 ,  0.738605814759 ,
	-0.207055236082 ,  0.772740661031 ,
	-0.138918542134 ,  0.78784620241 ,
	-0.219996188337 ,  0.821036952346 ,
	-0.147600951017 ,  0.83708659006 ,
	-0.232937140592 ,  0.86933324366 ,
	-0.1562833599 ,  0.886326977711 ,
	-0.245878092847 ,  0.917629534975 ,
	-0.164965768784 ,  0.935567365362 ,
	-0.258819045103 ,  0.965925826289 ,
	-0.173648177667 ,  0.984807753012 ,
	-0.271759997358 ,  1.0142221176 ,
	-0.18233058655 ,  1.03404814066 ,
	-0.00868240888335 ,  0.0492403876506 ,
	-0.00435778713738 ,  0.0498097349046 ,
	-0.0173648177667 ,  0.0984807753012 ,
	-0.00871557427477 ,  0.0996194698092 ,
	-0.02604722665 ,  0.147721162952 ,
	-0.0130733614121 ,  0.149429204714 ,
	-0.0347296355334 ,  0.196961550602 ,
	-0.0174311485495 ,  0.199238939618 ,
	-0.0434120444167 ,  0.246201938253 ,
	-0.0217889356869 ,  0.249048674523 ,
	-0.0520944533001 ,  0.295442325904 ,
	-0.0261467228243 ,  0.298858409428 ,
	-0.0607768621834 ,  0.344682713554 ,
	-0.0305045099617 ,  0.348668144332 ,
	-0.0694592710668 ,  0.393923101205 ,
	-0.0348622970991 ,  0.398477879237 ,
	-0.0781416799501 ,  0.443163488855 ,
	-0.0392200842364 ,  0.448287614141 ,
	-0.0868240888335 ,  0.492403876506 ,
	-0.0435778713738 ,  0.498097349046 ,
	-0.0955064977168 ,  0.541644264157 ,
	-0.0479356585112 ,  0.54790708395 ,
	-0.1041889066 ,  0.590884651807 ,
	-0.0522934456486 ,  0.597716818855 ,
	-0.112871315484 ,  0.640125039458 ,
	-0.056651232786 ,  0.64752655376 ,
	-0.121553724367 ,  0.689365427109 ,
	-0.0610090199234 ,  0.697336288664 ,
	-0.13023613325 ,  0.738605814759 ,
	-0.0653668070607 ,  0.747146023569 ,
	-0.138918542134 ,  0.78784620241 ,
	-0.0697245941981 ,  0.796955758473 ,
	-0.147600951017 ,  0.83708659006 ,
	-0.0740823813355 ,  0.846765493378 ,
	-0.1562833599 ,  0.886326977711 ,
	-0.0784401684729 ,  0.896575228283 ,
	-0.164965768784 ,  0.935567365362 ,
	-0.0827979556103 ,  0.946384963187 ,
	-0.173648177667 ,  0.984807753012 ,
	-0.0871557427477 ,  0.996194698092 ,
	-0.18233058655 ,  1.03404814066 ,
	-0.091513529885 ,  1.046004433 ,
	-0.00435778713738 ,  0.0498097349046 ,
	0.0 ,  0.05 ,
	-0.00871557427477 ,  0.0996194698092 ,
	0.0 ,  0.1 ,
	-0.0130733614121 ,  0.149429204714 ,
	0.0 ,  0.15 ,
	-0.0174311485495 ,  0.199238939618 ,
	0.0 ,  0.2 ,
	-0.0217889356869 ,  0.249048674523 ,
	0.0 ,  0.25 ,
	-0.0261467228243 ,  0.298858409428 ,
	0.0 ,  0.3 ,
	-0.0305045099617 ,  0.348668144332 ,
	0.0 ,  0.35 ,
	-0.0348622970991 ,  0.398477879237 ,
	0.0 ,  0.4 ,
	-0.0392200842364 ,  0.448287614141 ,
	0.0 ,  0.45 ,
	-0.0435778713738 ,  0.498097349046 ,
	0.0 ,  0.5 ,
	-0.0479356585112 ,  0.54790708395 ,
	0.0 ,  0.55 ,
	-0.0522934456486 ,  0.597716818855 ,
	0.0 ,  0.6 ,
	-0.056651232786 ,  0.64752655376 ,
	0.0 ,  0.65 ,
	-0.0610090199234 ,  0.697336288664 ,
	0.0 ,  0.7 ,
	-0.0653668070607 ,  0.747146023569 ,
	0.0 ,  0.75 ,
	-0.0697245941981 ,  0.796955758473 ,
	0.0 ,  0.8 ,
	-0.0740823813355 ,  0.846765493378 ,
	0.0 ,  0.85 ,
	-0.0784401684729 ,  0.896575228283 ,
	0.0 ,  0.9 ,
	-0.0827979556103 ,  0.946384963187 ,
	0.0 ,  0.95 ,
	-0.0871557427477 ,  0.996194698092 ,
	0.0 ,  1.0 ,
	-0.091513529885 ,  1.046004433 ,
	0.0 ,  1.05 ,
	0.0 ,  0.05 ,
	0.00435778713738 ,  0.0498097349046 ,
	0.0 ,  0.1 ,
	0.00871557427477 ,  0.0996194698092 ,
	0.0 ,  0.15 ,
	0.0130733614121 ,  0.149429204714 ,
	0.0 ,  0.2 ,
	0.0174311485495 ,  0.199238939618 ,
	0.0 ,  0.25 ,
	0.0217889356869 ,  0.249048674523 ,
	0.0 ,  0.3 ,
	0.0261467228243 ,  0.298858409428 ,
	0.0 ,  0.35 ,
	0.0305045099617 ,  0.348668144332 ,
	0.0 ,  0.4 ,
	0.0348622970991 ,  0.398477879237 ,
	0.0 ,  0.45 ,
	0.0392200842364 ,  0.448287614141 ,
	0.0 ,  0.5 ,
	0.0435778713738 ,  0.498097349046 ,
	0.0 ,  0.55 ,
	0.0479356585112 ,  0.54790708395 ,
	0.0 ,  0.6 ,
	0.0522934456486 ,  0.597716818855 ,
	0.0 ,  0.65 ,
	0.056651232786 ,  0.64752655376 ,
	0.0 ,  0.7 ,
	0.0610090199234 ,  0.697336288664 ,
	0.0 ,  0.75 ,
	0.0653668070607 ,  0.747146023569 ,
	0.0 ,  0.8 ,
	0.0697245941981 ,  0.796955758473 ,
	0.0 ,  0.85 ,
	0.0740823813355 ,  0.846765493378 ,
	0.0 ,  0.9 ,
	0.0784401684729 ,  0.896575228283 ,
	0.0 ,  0.95 ,
	0.0827979556103 ,  0.946384963187 ,
	0.0 ,  1.0 ,
	0.0871557427477 ,  0.996194698092 ,
	0.0 ,  1.05 ,
	0.091513529885 ,  1.046004433 ,
	0.00435778713738 ,  0.0498097349046 ,
	0.00868240888335 ,  0.0492403876506 ,
	0.00871557427477 ,  0.0996194698092 ,
	0.0173648177667 ,  0.0984807753012 ,
	0.0130733614121 ,  0.149429204714 ,
	0.02604722665 ,  0.147721162952 ,
	0.0174311485495 ,  0.199238939618 ,
	0.0347296355334 ,  0.196961550602 ,
	0.0217889356869 ,  0.249048674523 ,
	0.0434120444167 ,  0.246201938253 ,
	0.0261467228243 ,  0.298858409428 ,
	0.0520944533001 ,  0.295442325904 ,
	0.0305045099617 ,  0.348668144332 ,
	0.0607768621834 ,  0.344682713554 ,
	0.0348622970991 ,  0.398477879237 ,
	0.0694592710668 ,  0.393923101205 ,
	0.0392200842364 ,  0.448287614141 ,
	0.0781416799501 ,  0.443163488855 ,
	0.0435778713738 ,  0.498097349046 ,
	0.0868240888335 ,  0.492403876506 ,
	0.0479356585112 ,  0.54790708395 ,
	0.0955064977168 ,  0.541644264157 ,
	0.0522934456486 ,  0.597716818855 ,
	0.1041889066 ,  0.590884651807 ,
	0.056651232786 ,  0.64752655376 ,
	0.112871315484 ,  0.640125039458 ,
	0.0610090199234 ,  0.697336288664 ,
	0.121553724367 ,  0.689365427109 ,
	0.0653668070607 ,  0.747146023569 ,
	0.13023613325 ,  0.738605814759 ,
	0.0697245941981 ,  0.796955758473 ,
	0.138918542134 ,  0.78784620241 ,
	0.0740823813355 ,  0.846765493378 ,
	0.147600951017 ,  0.83708659006 ,
	0.0784401684729 ,  0.896575228283 ,
	0.1562833599 ,  0.886326977711 ,
	0.0827979556103 ,  0.946384963187 ,
	0.164965768784 ,  0.935567365362 ,
	0.0871557427477 ,  0.996194698092 ,
	0.173648177667 ,  0.984807753012 ,
	0.091513529885 ,  1.046004433 ,
	0.18233058655 ,  1.03404814066 ,
	0.00868240888335 ,  0.0492403876506 ,
	0.0129409522551 ,  0.0482962913145 ,
	0.0173648177667 ,  0.0984807753012 ,
	0.0258819045103 ,  0.0965925826289 ,
	0.02604722665 ,  0.147721162952 ,
	0.0388228567654 ,  0.144888873943 ,
	0.0347296355334 ,  0.196961550602 ,
	0.0517638090205 ,  0.193185165258 ,
	0.0434120444167 ,  0.246201938253 ,
	0.0647047612756 ,  0.241481456572 ,
	0.0520944533001 ,  0.295442325904 ,
	0.0776457135308 ,  0.289777747887 ,
	0.0607768621834 ,  0.344682713554 ,
	0.0905866657859 ,  0.338074039201 ,
	0.0694592710668 ,  0.393923101205 ,
	0.103527618041 ,  0.386370330516 ,
	0.0781416799501 ,  0.443163488855 ,
	0.116468570296 ,  0.43466662183 ,
	0.0868240888335 ,  0.492403876506 ,
	0.129409522551 ,  0.482962913145 ,
	0.0955064977168 ,  0.541644264157 ,
	0.142350474806 ,  0.531259204459 ,
	0.1041889066 ,  0.590884651807 ,
	0.155291427062 ,  0.579555495773 ,
	0.112871315484 ,  0.640125039458 ,
	0.168232379317 ,  0.627851787088 ,
	0.121553724367 ,  0.689365427109 ,
	0.181173331572 ,  0.676148078402 ,
	0.13023613325 ,  0.738605814759 ,
	0.194114283827 ,  0.724444369717 ,
	0.138918542134 ,  0.78784620241 ,
	0.207055236082 ,  0.772740661031 ,
	0.147600951017 ,  0.83708659006 ,
	0.219996188337 ,  0.821036952346 ,
	0.1562833599 ,  0.886326977711 ,
	0.232937140592 ,  0.86933324366 ,
	0.164965768784 ,  0.935567365362 ,
	0.245878092847 ,  0.917629534975 ,
	0.173648177667 ,  0.984807753012 ,
	0.258819045103 ,  0.965925826289 ,
	0.18233058655 ,  1.03404814066 ,
	0.271759997358 ,  1.0142221176 ,
	0.0129409522551 ,  0.0482962913145 ,
	0.0171010071663 ,  0.0469846310393 ,
	0.0258819045103 ,  0.0965925826289 ,
	0.0342020143326 ,  0.0939692620786 ,
	0.0388228567654 ,  0.144888873943 ,
	0.0513030214989 ,  0.140953893118 ,
	0.0517638090205 ,  0.193185165258 ,
	0.0684040286651 ,  0.187938524157 ,
	0.0647047612756 ,  0.241481456572 ,
	0.0855050358314 ,  0.234923155196 ,
	0.0776457135308 ,  0.289777747887 ,
	0.102606042998 ,  0.281907786236 ,
	0.0905866657859 ,  0.338074039201 ,
	0.119707050164 ,  0.328892417275 ,
	0.103527618041 ,  0.386370330516 ,
	0.13680805733 ,  0.375877048314 ,
	0.116468570296 ,  0.43466662183 ,
	0.153909064497 ,  0.422861679354 ,
	0.129409522551 ,  0.482962913145 ,
	0.171010071663 ,  0.469846310393 ,
	0.142350474806 ,  0.531259204459 ,
	0.188111078829 ,  0.516830941432 ,
	0.155291427062 ,  0.579555495773 ,
	0.205212085995 ,  0.563815572472 ,
	0.168232379317 ,  0.627851787088 ,
	0.222313093162 ,  0.610800203511 ,
	0.181173331572 ,  0.676148078402 ,
	0.239414100328 ,  0.65778483455 ,
	0.194114283827 ,  0.724444369717 ,
	0.256515107494 ,  0.704769465589 ,
	0.207055236082 ,  0.772740661031 ,
	0.273616114661 ,  0.751754096629 ,
	0.219996188337 ,  0.821036952346 ,
	0.290717121827 ,  0.798738727668 ,
	0.232937140592 ,  0.86933324366 ,
	0.307818128993 ,  0.845723358707 ,
	0.245878092847 ,  0.917629534975 ,
	0.324919136159 ,  0.892707989747 ,
	0.258819045103 ,  0.965925826289 ,
	0.342020143326 ,  0.939692620786 ,
	0.271759997358 ,  1.0142221176 ,
	0.359121150492 ,  0.986677251825 ,
	0.0171010071663 ,  0.0469846310393 ,
	0.021130913087 ,  0.0453153893518 ,
	0.0342020143326 ,  0.0939692620786 ,
	0.0422618261741 ,  0.0906307787037 ,
	0.0513030214989 ,  0.140953893118 ,
	0.0633927392611 ,  0.135946168055 ,
	0.0684040286651 ,  0.187938524157 ,
	0.0845236523481 ,  0.181261557407 ,
	0.0855050358314 ,  0.234923155196 ,
	0.105654565435 ,  0.226576946759 ,
	0.102606042998 ,  0.281907786236 ,
	0.126785478522 ,  0.271892336111 ,
	0.119707050164 ,  0.328892417275 ,
	0.147916391609 ,  0.317207725463 ,
	0.13680805733 ,  0.375877048314 ,
	0.169047304696 ,  0.362523114815 ,
	0.153909064497 ,  0.422861679354 ,
	0.190178217783 ,  0.407838504166 ,
	0.171010071663 ,  0.469846310393 ,
	0.21130913087 ,  0.453153893518 ,
	0.188111078829 ,  0.516830941432 ,
	0.232440043957 ,  0.49846928287 ,
	0.205212085995 ,  0.563815572472 ,
	0.253570957044 ,  0.543784672222 ,
	0.222313093162 ,  0.610800203511 ,
	0.274701870131 ,  0.589100061574 ,
	0.239414100328 ,  0.65778483455 ,
	0.295832783218 ,  0.634415450926 ,
	0.256515107494 ,  0.704769465589 ,
	0.316963696306 ,  0.679730840277 ,
	0.273616114661 ,  0.751754096629 ,
	0.338094609393 ,  0.725046229629 ,
	0.290717121827 ,  0.798738727668 ,
	0.35922552248 ,  0.770361618981 ,
	0.307818128993 ,  0.845723358707 ,
	0.380356435567 ,  0.815677008333 ,
	0.324919136159 ,  0.892707989747 ,
	0.401487348654 ,  0.860992397685 ,
	0.342020143326 ,  0.939692620786 ,
	0.422618261741 ,  0.906307787037 ,
	0.359121150492 ,  0.986677251825 ,
	0.443749174828 ,  0.951623176388 ,
	0.021130913087 ,  0.0453153893518 ,
	0.025 ,  0.0433012701892 ,
	0.0422618261741 ,  0.0906307787037 ,
	0.05 ,  0.0866025403784 ,
	0.0633927392611 ,  0.135946168055 ,
	0.075 ,  0.129903810568 ,
	0.0845236523481 ,  0.181261557407 ,
	0.1 ,  0.173205080757 ,
	0.105654565435 ,  0.226576946759 ,
	0.125 ,  0.216506350946 ,
	0.126785478522 ,  0.271892336111 ,
	0.15 ,  0.259807621135 ,
	0.147916391609 ,  0.317207725463 ,
	0.175 ,  0.303108891325 ,
	0.169047304696 ,  0.362523114815 ,
	0.2 ,  0.346410161514 ,
	0.190178217783 ,  0.407838504166 ,
	0.225 ,  0.389711431703 ,
	0.21130913087 ,  0.453153893518 ,
	0.25 ,  0.433012701892 ,
	0.232440043957 ,  0.49846928287 ,
	0.275 ,  0.476313972081 ,
	0.253570957044 ,  0.543784672222 ,
	0.3 ,  0.519615242271 ,
	0.274701870131 ,  0.589100061574 ,
	0.325 ,  0.56291651246 ,
	0.295832783218 ,  0.634415450926 ,
	0.35 ,  0.606217782649 ,
	0.316963696306 ,  0.679730840277 ,
	0.375 ,  0.649519052838 ,
	0.338094609393 ,  0.725046229629 ,
	0.4 ,  0.692820323028 ,
	0.35922552248 ,  0.770361618981 ,
	0.425 ,  0.736121593217 ,
	0.380356435567 ,  0.815677008333 ,
	0.45 ,  0.779422863406 ,
	0.401487348654 ,  0.860992397685 ,
	0.475 ,  0.822724133595 ,
	0.422618261741 ,  0.906307787037 ,
	0.5 ,  0.866025403784 ,
	0.443749174828 ,  0.951623176388 ,
	0.525 ,  0.909326673974 ,
	0.0 ,  0.0 ,
	-1.0 ,  1.73205080757 ,
	0.0 ,  0.0 ,
	-0.845236523481 ,  1.81261557407 ,
	0.0 ,  0.0 ,
	-0.684040286651 ,  1.87938524157 ,
	0.0 ,  0.0 ,
	-0.517638090205 ,  1.93185165258 ,
	0.0 ,  0.0 ,
	-0.347296355334 ,  1.96961550602 ,
	0.0 ,  0.0 ,
	-0.174311485495 ,  1.99238939618 ,
	0.0 ,  0.0 ,
	0.0 ,  2.0 ,
	0.0 ,  0.0 ,
	0.174311485495 ,  1.99238939618 ,
	0.0 ,  0.0 ,
	0.347296355334 ,  1.96961550602 ,
	0.0 ,  0.0 ,
	0.517638090205 ,  1.93185165258 ,
	0.0 ,  0.0 ,
	0.684040286651 ,  1.87938524157 ,
	0.0 ,  0.0 ,
	0.845236523481 ,  1.81261557407 ,
	0.0 ,  0.0 ,
	1.0 ,  1.73205080757 ,

};

void drawPolar() {
	glColor3f(0, 0.5, 0);
	glVertexPointer(2, GL_FLOAT, 4 * sizeof(float), grid);
	glBegin(GL_LINES);
	for (int i = 0;i<sizeof(grid) / sizeof(float) - 1;i += 2) {
		glVertex2fv(grid + i);
	}

	glEnd();
}

void drawFan(float angle, float field) {
	static const double pi = 3.141592653589793;
	glColor4f(0.2f, 0.2f, 0.2f, 0.5f);
	angle = angle*pi / 180;
	field = field*pi / 180;
	float x1 = cos(angle + field / 2) * 2;
	float y1 = sin(angle + field / 2) * 2;
	float x2 = cos(angle - field / 2) * 2;
	float y2 = sin(angle - field / 2) * 2;
	glBegin(GL_TRIANGLES);
	glVertex2f(0, 0);
	glVertex2f(x1, y1);
	glVertex2f(x2, y2);
	glEnd();

}
void RadarDisplay::lock()
{
	WaitForSingleObject((HANDLE)mutex, 1);
}
void RadarDisplay::unlock()
{
	ReleaseMutex((HANDLE)mutex);
}
RadarDisplay::RadarDisplay()
{
	mutex = (int)CreateMutex(NULL, FALSE, NULL);
}


RadarDisplay::~RadarDisplay()
{
}

static const float zoom = 50;
static const double angleoffset = -30;
void drawTarget(float angle, float distance, float size) {
	static const double pi = 3.141592653589793;

	double r = (angle + angleoffset + 90)*pi / 180;
	float x = distance*cos(r) / zoom;
	float y = distance*sin(r) / zoom;
	glPointSize(size);
	glBegin(GL_POINTS);
	glVertex2f(x, y);
	glEnd();
}

void RadarDisplay::onRender()
{
	glDisable(GL_DEPTH_TEST);
	drawFan(90, 30);
	drawPolar();
	glColor3f(1, 0, 0);
	lock();
	for (int i = 0;i < targetList.size();i++) {
		drawTarget(targetList[i].angle, targetList[i].distance, 12 + targetList[i].size);
	}
	unlock();
}
